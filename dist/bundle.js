chrome.runtime.onInstalled.addListener((function(){chrome.contextMenus.create({id:"aemEnhancer",title:"AEM Enhancer",contexts:["all"]}),chrome.contextMenus.create({parentId:"aemEnhancer",id:"openSelectedInEditor",title:"Open Selection in Editor",contexts:["selection"]}),chrome.contextMenus.create({parentId:"aemEnhancer",id:"openSelectedInProperties",title:"Open Selection in Properties",contexts:["selection"]}),chrome.contextMenus.create({parentId:"aemEnhancer",id:"openSelectedInPreview",title:"Open Selection in Preview",contexts:["selection"]}),chrome.contextMenus.create({parentId:"aemEnhancer",id:"openSelectedInAssets",title:"Open Selection in Assets",contexts:["selection"]}),chrome.contextMenus.create({parentId:"aemEnhancer",id:"separator",type:"separator",title:"-----",contexts:["selection"]}),chrome.contextMenus.create({parentId:"aemEnhancer",id:"copyRealPath",title:"Copy Real Path",contexts:["page"]})})),chrome.contextMenus.onClicked.addListener((function(e,t){if("openSelectedInEditor"===e.menuItemId){var n=e.selectionText,o=new URL(t.url).origin+"/editor.html"+n+".html";chrome.tabs.create({url:o})}"openSelectedInProperties"===e.menuItemId&&(n=e.selectionText,o=new URL(t.url).origin+"/mnt/overlay/wcm/core/content/sites/properties.html?item="+n,chrome.tabs.create({url:o})),"openSelectedInPreview"===e.menuItemId&&(n=e.selectionText,o=new URL(t.url).origin+n+".html?wcmmode=disabled",chrome.tabs.create({url:o})),"openSelectedInAssets"===e.menuItemId&&(n=e.selectionText,o=new URL(t.url).origin+"/assets.html"+n,chrome.tabs.create({url:o})),"copyRealPath"===e.menuItemId&&chrome.tabs.executeScript(t.id,{code:"\n        var button = document.querySelector('.js-editor-PageInfo-closePopover');\n        if (button) {\n          var dataPath = button.getAttribute('data-path');\n          var itemIndex = dataPath.indexOf('?item=');\n          var value = itemIndex !== -1 ? dataPath.substring(itemIndex + 7) : dataPath;\n          var tempInput = document.createElement('input');\n          document.body.appendChild(tempInput);\n          tempInput.value = \"/\" + value;\n          tempInput.select();\n          document.execCommand('copy');\n          document.body.removeChild(tempInput);\n          console.log('Il valore Ã¨ stato copiato negli appunti: ' + value);\n        }\n      "}),"realPathManagePubblication"===e.menuItemId&&chrome.tabs.executeScript(t.id,{code:"\n      var button = document.querySelector('.js-editor-PageInfo-closePopover');\n      if (button) {\n        var dataPath = button.getAttribute('data-path');\n        var itemIndex = dataPath.indexOf('?item=');\n        var value = itemIndex !== -1 ? dataPath.substring(itemIndex + 7) : dataPath;\n        var tempInput = document.createElement('input');\n        var url = new URL(tab.url);\n      \n        document.body.appendChild(tempInput);\n        tempInput.value = \"/mnt/override/libs/wcm/core/content/common/managepublicationwizard.html?item=/\" + value;\n        tempInput.select();\n        var destinazione = url.origin + \"/mnt/override/libs/wcm/core/content/common/managepublicationwizard.html?item=/\" + tempInput;\n        document.body.removeChild(tempInput);\n        chrome.tabs.create({ url: destinazione });\n      \n      }      \n      "})}));