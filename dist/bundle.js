chrome.runtime.onInstalled.addListener((function(){chrome.contextMenus.create({id:"aemEnhancer",title:"AEM Enhancer",contexts:["all"]}),chrome.contextMenus.create({parentId:"aemEnhancer",id:"openInEditor",title:"Open Selection in Editor",contexts:["selection"]}),chrome.contextMenus.create({parentId:"aemEnhancer",id:"openInProperties",title:"Open Selection in Properties",contexts:["selection"]}),chrome.contextMenus.create({parentId:"aemEnhancer",id:"openInAssets",title:"Open Selection in Assets",contexts:["selection"]}),chrome.contextMenus.create({parentId:"aemEnhancer",id:"copyRealPath",title:"Copy Real Path",contexts:["all"]})})),chrome.contextMenus.onClicked.addListener((function(e,t){if("openInEditor"===e.menuItemId){var n=e.selectionText,o=new URL(t.url).origin+"/editor.html"+n+".html";chrome.tabs.create({url:o})}"openInProperties"===e.menuItemId&&(n=e.selectionText,o=new URL(t.url).origin+"/mnt/overlay/wcm/core/content/sites/properties.html?item="+n,chrome.tabs.create({url:o})),"openInAssets"===e.menuItemId&&(n=e.selectionText,o=new URL(t.url).origin+"/assets.html"+n+".html",chrome.tabs.create({url:o})),"copyRealPath"===e.menuItemId&&chrome.tabs.executeScript(t.id,{code:"\n        var button = document.querySelector('.js-editor-PageInfo-closePopover');\n        if (button) {\n          var dataPath = button.getAttribute('data-path');\n          var itemIndex = dataPath.indexOf('?item=');\n          var value = itemIndex !== -1 ? dataPath.substring(itemIndex + 7) : dataPath;\n          var tempInput = document.createElement('input');\n          document.body.appendChild(tempInput);\n          tempInput.value = \"/\" + value;\n          tempInput.select();\n          document.execCommand('copy');\n          document.body.removeChild(tempInput);\n          console.log('Il valore Ã¨ stato copiato negli appunti: ' + value);\n        }\n      "})}));